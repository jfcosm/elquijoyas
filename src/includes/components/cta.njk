{% macro ctaButton(variant, text, href, options={}) %}
  {% set size = options.size or 'md' %}
  {% set tone = options.tone or 'dark' %}
  {% set shadow = options.shadow or false %}
  {% set newTab = options.newTab if options.newTab is defined else true %}

  {% set baseClasses = 'inline-flex items-center justify-center rounded-full font-semibold uppercase tracking-[0.2em] transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2' %}

  {% if size == 'lg' %}
    {% set sizeClasses = 'px-8 py-3 text-sm' %}
  {% elseif size == 'sm' %}
    {% set sizeClasses = 'px-5 py-2.5 text-xs md:text-sm' %}
  {% else %}
    {% set sizeClasses = 'px-6 py-3 text-sm' %}
  {% endif %}

  {% if variant == 'whatsapp' %}
    {% set variantClasses = 'bg-secondary text-neutral-900 hover:bg-secondary-light focus-visible:outline-secondary-light' %}
    {% if shadow %}
      {% set variantClasses = variantClasses ~ ' shadow-lg shadow-secondary/30' %}
    {% endif %}
  {% elseif variant == 'instagram' %}
    {% if tone == 'light' %}
      {% set variantClasses = 'border border-neutral-200 text-neutral-700 hover:border-neutral-400 focus-visible:outline-neutral-300' %}
    {% else %}
      {% set variantClasses = 'border border-white/50 text-neutral-50 hover:bg-white/10 focus-visible:outline-white' %}
    {% endif %}
  {% else %}
    {% set variantClasses = '' %}
  {% endif %}

  <a
    href="{{ href }}"
    class="{{ (baseClasses ~ ' ' ~ sizeClasses ~ ' ' ~ variantClasses) | trim }}"
    {% if newTab %}target="_blank" rel="noopener"{% endif %}
  >
    {{ text }}
  </a>
{% endmacro %}
